# 20231231_TIL - GC(Recap)


## Recap

- JVM은 Stack과 Heap 영역에 대해서 메모리를 알아서 관리해준다. Stack의 경우 메소드 실행이 끝나면 매개변수나 지역변수에 할당된 메모리를 모두 해제하고, Heap 영역은 GC가 관리하는 영역이다.
- GC는 `신규로 생성된 객체의 대부분은 금방 사용되지 않고, 오래된 객체일수록 참조가 덜 일어난다`는 `Weak Generational Hypothesis`를 바탕으로, `Young`과 `Old` 영역으로 메모리를 나누어 관리한다.
    - 처음에 객체가 생성되면 `Young` 영역 내 `Eden`에 객체를 할당한다.
    - `Eden`이 꽉차면 거기서 더이상 참조되지 않는 객체를 마킹하고 해제하는 `Minor GC`를 실행한다.
    - 살아남은 객체들은 `Survivor` 영역으로 옮겨진다. 이때 객체의 `age`를 하나 올린다.
    - `Eden`이 꽉 차면 다시 한번 `Minor GC`가 일어나고 제 2의 `Survivor` 영역으로 살아남은 객체가 옮겨진다. 이 때 기존의 `Survivor`에서도 `Minor GC`가 일어난다.
    - 제 2의 `Survivor`에 옮겨진 객체들은 다시 age가 이전보다 하나 오른다.
    - 이러다가 `age threshold`가 넘어서면 해당 객체는 `Old` 영역으로 옮겨진다.

연말 가족 일정이 있어 추가 내용은 내일 첨부하는 걸로 하자. 새해 복 많이 받자!!