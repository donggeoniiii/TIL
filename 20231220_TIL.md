# 20231220_TIL - Java


## Java의 특징

- 같은 기능의 소스를 어느 CPU나 OS에서 실행하더라도 같은 기능을 하도록 하는 언어를 만들고자 고안
    
    → OS에 독립적 → JVM(Java Virtual Machine)의 존재
    
    → 웹 개발에 적합함(어떤 클라이언트에서든 동일한 결과를 가져와야 함)
    
- JVM이 가상의 컴퓨터로 java 소스 코드를 실행시켜 주는 역할, 이 JVM 자체는 OS와 CPU 위에서 실행되므로 플랫폼(OS & CPU)에 호환되는 JVM이 필요함

## Java 코드의 실행 과정

```jsx
1. `.java` 소스 코드 실행
2. `javac` 컴파일러가 `.class` 바이트 코드로 전환
3. JVM의 클래스 로더에게 컴파일된 바이트 코드 전달
4. JVM 메모리에 필요한 클래스 탑재
5. 실행 엔진이 JVM 메모리에 올라온 바이트 코드를 명령어 단위로 실행
```

### 클래스 로더

<aside>
💡 말 그대로 Java의 클래스를 불러오는 역할. 필요로 하는 Java의 클래스를 로딩하고, 링킹하고, 초기화한다.

</aside>

- 계층 구조를 가지고 있음
- 각자 계층별 탐색 범위를 가지고 있고, 하위 클래스에서 상위 클래스로 위임하면서 필요한 클래스를 찾는다.
- 최상위에서 어플리케이션 클래스 로더가 개발자가 작성한 Internal 클래스를 클래스 패스에서 찾지 못하면, `ClassNotFoundException`을 던짐
- 하위 클래스로더는 상위 클래스로더의 로드한 클래스 내용을 볼 수 있지만, 상위 클래스로더는 하위 클래스로더의 로딩 내용을 볼 수 없음
- 상위 클래스일 수록 더 보편적으로 사용하는 클래스를 로딩함
    
    → 위 두가지 특성으로 로딩된 클래스가 중복되지 않는 유일성 보장
    

### 실행 엔진

<aside>
💡 클래스 로더를 통해 JVM 메모리 상의 바이트코드를 명령어 단위로 읽어서 실행

</aside>

- 인터프리터: 바이트 코드를 명령어 단위로 하나씩 읽어서 실행
    - JVM 내에서 바이트코드는 기본적으로 인터프리팅 방식으로 동작
- JIT 컴파일러: 인터프리터 → 전체 실행속도 느리다는 단점 보완
    - 바이트코드 전체를 컴파일해서 네이티브 코드로 변경, 해당 메소드를 직접 네이티브 코드로 실행
    - 내부적으로 해당하는 메소드가 얼마나 자주 호출되는지 체크하고, 자주 실행되는 경우에만 이렇게 실행한다.
    - 캐시에 보관하여 한번 컴파일된 코드를 더 빠르게 실행시킨다.