# 20230326_TIL - 무선 이동 네트워크 (2)

## Recap: 802.11(Wi-Fi)

Q. 무선 호스트 → AP로 가는 프레임에 라우터의 MAC 주소가 있는 이유?

A. AP는 링크 계층에 속하는 친구이기 때문에 프레임을 열어서 IP 데이터그램 내에 있는 라우터의 주소를 확인할 수 없다. 그래서 따로 써줘야 새 프레임의 헤더에 달리게 된다.

Q. AP는 논리적으로 생각했을 때 무선 호스트를 유선 통신으로 잇기까지 필요한 싱글 홉을 담당하는데, 그럼 우리가 아는 공유기가 AP인가?

A. 정확히는 AP와 라우팅까지 함께 가능한 하드웨어다. 그래서 공유기를 사용한다면 Wi-Fi 프레임의 address 1과 3에 같은 주소가 적힌다(AP == 게이트웨이 라우터)

### Wi-Fi의 전송 기법 - 전송속도와 전송률 사이의 trade-off

우리가 AP에서 멀어질 수록 신호 감도가 낮아지면 전송 속도가 낮아지는 것이 느껴진다. 이는 무선 통신시 자체적으로 안정적인 전송을 위해 인코딩 방식을 바꾸기 때문이다. 

- 만약 전송이 안정적이면 전송 시 오류가 발생할 확률이 낮아진다. 그래서 프레임에 오류에 대처하기 위한 정보보다 실제 데이터를 차지하는 비율이 높아진다.
- 만약 전송이 불안정하면(==AP에서 멀어지면) 전송 시 오류가 발생할 확률이 높다. 그래서 프레임에 오류를 대처하기 위한 정보를 더 많이 넣게 된다.

## 셀룰러 네트워크

이동 통신사에서 제공하는 광범위 네트워크 통신 방식이다.

- 서비스를 제공하는 지역을 `셀(cell)`이라는 단위로 나누고, 해당 셀마다 `기지국(base station, BS)`을 지어 AP로 사용한다. 기지국은 802.11의 AP, 즉 와이파이와 비슷한 방식으로 작동한다.
- `기지국`들은 유선 이동통신망으로 연결되어 하나로 묶인다. 여기를 `MSC(Mobile Switching Center)`라고 한다.
- MSC는 게이트웨이 라우터의 역할을 한다.

### 셀룰러 네트워크의 single hop

2G까지는 FDMA/TDMA 방식을 사용했다. 그러다 3G에 와서 CDMA 기반 방식을 사용했다. Wi-Fi의 CDMA/CA, 유선망의 CDMA/CD와는 다른 방식이다. 수학적인 기법을 통해 서로 다른 신호를 노이즈 처리하게 해서 충돌을 피한다.

## Mobility

Q1. 같은 라우터 안에서 한 AP에 연결되어 있다가 다른 AP로 바뀐다고 생각해보자. IP의 주소가 변할까?

A1. AP는 IP 주소에 관여하지 못한다. 동일한 서브넷이면 바뀔 일이 없다.

Q2. 우리가 유튜브 영상을 보고 있을 때 AP 연결이 바뀐다고 생각해보자. 전송에 영향이 있을까?

A2. 영향이 없다. 왜냐하면 스트리밍 데이터는 유튜브 서버에서 전송 계층 레벨로 IP 주소를 기준으로 넘어올 것이고, 달라지는 것은 이를 링크 계층에서 수신 받을 AP의 MAC 주소인데 이는 switch의 self-learning으로 해결된다.

Q3. 근데 길 가면서 유튜브 볼 때는 물리적으로 엄청 달라져도 안 끊기던데, 이러면 IP 주소도 바뀐 상황 아님?

A3. 애초에 얘네는 Wi-Fi가 아니다. 우리가 사용하는 LTE는 커버 범위가 전국이다. 즉 전국 내에서 AP만 바뀐다고 생각하면 된다(이게 가능한 이유는 설명하기 어렵지만, 이동통신망 내에서 계층화 되어 있다고 생각하면 된다). ‘이동’ 통신사라고 불리는 이유가 괜히 있는 게 아니다.