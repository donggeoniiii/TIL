# 20240328_TIL - 네트워크 보안 (1)

### Intro: Warning 페이지가 뜨기까지

우리가 가끔 특정 사이트나 페이지에 접근하려고 하면 많이 보는 그 페이지가 있다. 근데 궁금한 점이 있다. warning html 페이지는 우리가 원래 목표했던 사이트에서 보내는 것이 아니라, 정부측에서 보내는 파일이다. 이는 어떻게 가능한 것일까?

1. 요청을 보내려는 사이트와 TCP Connection을 연결한다.
2. 클라이언트가 HTTP request를 날린다.
3. 이통사의 게이트웨이 라우터에서 필터링 중인 사이트로 향하는 request를 발견하면, dest IP 주소를 가지고 HTTP response를 흉내내서 보낸다.
4. 클라이언트는 원래 보내려던 사이트로부터 응답을 받은 것으로 착각한다. 그 결과 우리가 보는 페이지를 보게 된다.

Q. 왜 tcp connection부터 차단하지 않을까?

A. 그러면 에러 페이지가 뜨게 될텐데, 그럼 사람들은 정부의 차단 및 경고 목적을 알지 못하고 네트워크 사정이라고 착각하게 된다.

## 네트워크 보안의 요구 조건

1. `기밀성(confidentiality)`
    
    주고 받는 메시지는 둘만 알아야 한다 → 암호화 기법이 필요하다.
    
2. `인증(authentication)`
    
    메시지를 전달받는 사람이 권한이 있는지 확인 가능해야 한다. 암호화 방식별로 인증과정을 가지고 있다.
    
3. `메시지 무결성(integrity)`
    
    변형되지 않아야 한다. 디지털 서명 등을 사용해 입증한다. 보통 메시지의 해시값을 암호화해서 표현한다.
    
4. `가용성(availability)`
    
    필요한 시점에 필요한 정보에 접근이 가능해야 한다.
    

### 대칭키 암호화

- 두 호스트가 비밀키(Ks)를 공유한다.
- 근데 처음에 어떻게 서로의 비밀키를 전달하지?

### 공용키/비밀키 암호화

- 모든 호스트는 공용키(K+)와 비밀키(K-)가 있다.
    - 공용키는 모두가 알 수 있다. 특정 수신자의 공용키를 알아야 요청을 보낼 수 있다.
    - 비밀키는 오직 메시지 수신자만 알고 있다. 본인 앞으로 온 내용을 알기 위해서 알아야만 한다.
    - 공용키와 비밀키의 사용 순서가 바뀌어도 메시지가 열린다는 아주 위험한 특징이 있다.
      - (K-(K+(M)) == K+(K-(M))). 
      - 즉 비밀키가 노출되면 무력화된다.

Q. 누군가의 공용키라고 알려진 그 공용키가 정말 유효한 정보인지는 어떻게 알까? 

A. 현재는 믿을 만한 기관으로부터의 `공용키 인증서`를 발급받아 해결한다. 해당 데이터는 인증기관의 비밀키로 암호화 되어 있다.

Q. 그럼 인증기관의 공용키는 믿을 수 있나?

A. 그냥 믿어야 된다(root key). 보통 메이저한 웹 브라우저의 경우 안에 내장되어있다.