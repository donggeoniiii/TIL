# 20240206_TIL - 교착 상태 해결 방법, 그래프 운행법

## 교착 상태 해결 방법

운영 체제가 교착 상태에 대응하는 방식에는 `예방` , `회피` , `검출 및 회복`의 3가지 방식이 있다. 

### 예방

전에 공부한 4가지 교착 상태 발생 조건 중 하나라도 만족시키지 않게 할당하면 교착 상태는 일어나지 않는다. 그러나 `예방` 방식은 각각의 조건을 만족시키지 않게 하는 데서 문제점이 있다.

- 상호 배제
    
    사실상 임계 구역에 대한 제한을 풀겠다는 의미인데, 이 경우 동기화 문제 등이 발생할 수 있다. 또한 모든 자원의 상호 배제를 없애기도 현실적으로 어렵다.
    
- 점유와 대기
    
    이 경우 할당 시 무조건 한 프로세스에 모든 자원을 몰아주고, 할당 해제시 모든 자원을 한 번에 해제하게 될 것이다. 그렇지만 프로세스별로 자원의 사용량 등이 모두 다르므로 효율적인 이용과는 거리가 있다.
    
- 비선점
    
    자원을 이용 중인 프로세스에서 뺏어온다면 교착 상태는 발생하지 않는다. 자원 중 CPU의 경우 이 방식이 효과적이다. 그러나 입출력 장치의 사용 등과 같이 작업 중간에 자원을 뺏어오기 어려운 상황도 존재하므로 한계가 있다.
    
- 원형 대기 조건
    
    모든 자원에 번호를 붙이고 오름차순으로 자원을 할당하는 식이라면 자원 분배 그래프가 원형일 수 없다. 위 세 가지 방식에 비하면 현실적이고 실용적이다. 그러나 컴퓨터 내 수많은 자원들에 번호를 붙이고 이를 오름차순으로 두는 것은 간단한 작업도 아니고, 특정 자원의 활용률 저하로 이어질 수 있다.
    

### 교착 상태 회피

이 방식에선 무분별한 자원 할당을 교착 상태의 원인으로 본다. 따라서 교착 상태가 발생하지 않을 정도로만 조심스럽게 자원을 할당한다.

- `안전 상태(safe state)`
    
    교착 상태가 발생하지 않고 모든 프로세스가 정상적으로 할당받고 종료되는 상태
    
- `안전 순서열(safe sequence)`
    
    안전 상태를 유지할 수 있는 프로세스의 할당 순서. 안전 순서열이 있는 상태를 안전 상태라고 생각하면 된다.
    
- `불안전 상태(unsafe state)`
    
    교착 상태가 발생할 수 있는 상황

즉, 교착 상태 회피 방식은 시스템이 안전 상태를 유지하는 경우에만 자원을 할당하는 방식이다.

### 검출 및 회복

교착 상태가 발생했음을 인지하고 후 조치하는 방식이다. 그 전까지 운영체제는 자원을 요구할 때마다 모두 할당시켜주고, 대신 교착 상태 발생 여부를 주기적으로 검사한다. 그리고 검출 시 다음과 같은 방식으로 상태를 회복한다.

- 선점을 통한 회복
    
    한 프로세스씩 자원을 몰아주는 방식이다. 교착 상태가 해결될 때까지 다른 프로세스로부터 자원을 빼앗는다.
    
- 프로세스 강제 종료를 통한 회복
    
    가장 단순하면서도 확실한 방식이다. 모든 프로세스를 강제 종료하거나, 하나씩 꺼보는 방법이 있다. 전자는 확실하지만 그만큼 많은 작업 내용을 잃게 되고, 후자는 끌 때마다 교착 상태가 해결됐는지 확인하는 과정에서 오버헤드가 발생할 수 있다.
    

여담으로 모든 교착 상태에 대해 무조건 해결하려고만 하지는 않는다. 드물게 발생하는 잠재적 문제의 경우 엔지니어의 판단에 따라 무시하는 경우도 있다. 이런 방식을 `타조 알고리즘` 이라고 한다.

<br>

## 정보처리기사 필기 - 그래프 운행법

`깊이 우선 탐색(Depth First Search)`, `너비 우선 탐색(Breadth First Search)` 이 있다. 

깊이 우선 탐색은 보통 오름차순, 알파벳 순으로 방문하라는 조건이 있을 것이다. 한 정점에서 다음 정점으로 이동할 때마다 인접한 장점에서 해당 방식으로 비교해보면 된다. 없으면 백트래킹한다.

너비 우선 탐색 역시 비슷한 조건에서 탐색을 진행한다. 편하게 하려면 큐를 그려놓고 방문할 때마다 하나씩 빼고 인접 정점을 큐에 추가하면서 탐색하면 된다.