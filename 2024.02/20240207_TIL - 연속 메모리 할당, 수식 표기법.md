# 20240207_TIL - 연속 메모리 할당, 수식 표기법

## 연속 메모리 할당

보통 우리가 프로세스들을 메모리에 올리게 되면, 의구심을 품지 않은 채 프로세스들이 연속적인 주소값을 가진다는 것을 받아들였다. 이와 같이 메모리를 할당 받는 것을 `연속 메모리 할당` 이라고 한다.

운영체제의 주요 기능은 프로세스 관리와 메모리 관리다. 이번엔 운영체제가 프로세스를 실행시키면서 메모리를 관리하는 방법에 대해 알아보자.

### 스와핑

메모리에서 사용되지 않은 (== 실행상태가 아닌) 프로세스를 잠시 보조기억장치의 임시 공간으로 빼고, 그 공간에 다른 프로세스를 실행시키는 것을 말한다.

이 때 보조기억장치의 임시 공간을 `스왑 구역` , 나가고 들어오는 것을 각각 `스왑 아웃/스왑 인` 이라고 한다. 스왑 인 하는 경우에는 이전 메모리 주소와 다른 물리 주소를 할당받을 수 있다.

이 방식을 사용하면 프로세스의 메모리 주소 공간 크기가 실제 메모리보다 큰 경우에도 실행이 가능하다. 중간에 실행상태가 아닌 프로세스는 잠시 스왑 아웃 했다가 그동안 다른 프로세스를 실행하고, 한 프로세스가 실행을 마치면 그 자리에 다시 스왑 인 하는 방식이다.

### 메모리 할당

만약 프로세스가 메모리에 올라갈 때, 연속적으로 할당될 수 있는 구역이 여러 곳이 있다면 어디에 배치 되어야 할까?

- `최초 적합`
    
    운영체제가 처음으로 적재할 수 있는 공간을 찾으면 바로 배치한다. 검색을 최소화할 수 있고 빠른 할당이 가능하다.
    
- `최적 적합`
    
    운영체제가 빈 공간을 모두 검색해본 후 프로세스가 적재될 수 있는 가장 작은 공간(== 가장 딱 맞는 공간)을 찾아서 배치한다. 
    
- `최악 적합`
    
    운영체제가 빈 공간을 모두 검색해보고 프로세스가 적재될 수 있는 공간 중 가장 큰 공간에 배치한다.
    

### 외부 단편화

연속 메모리 할당 방식은 사실 효율적인 메모리 사용 방식이 아니다. 만약 할당과 해제를 번갈아가며 메모리의 사용자 영역 상의 빈 자리가 나눠져 있는 경우, 총 빈 공간의 합은 많지만 프로세스 전체를 연속적으로 탑재할 수 없어 사용되지 못하는 공간이 생길 수 있기 때문이다. 

프로세스 바깥에 생기는 빈 공간들은 분명 비어있지만 그보다 큰 프로세스는 적재되지 못하는 죽은 공간이 된다. 이와 같은 문제를 `외부 단편화(external fragmentation)` 라고 한다.

그렇다면 어떻게 외부 단편화 문제를 해결할 수 있을까? 대표적인 방법으로는 `압축` 이 있다. 메모리 곳곳에 흩어진 빈 공간을 하나로 모으는 방식이다. 이 때 메모리에 올라간 프로세스들은 적당히 재배치되어 하나로 합쳐진다. 학교 청소시간에 책상을 뒤로 밀어서 한번에 청소하는 그림을 그려보면 편하다. 

다만 압축 방식은 작은 공간들을 모으는 동안 시스템이 하던 일을 하지 못한다는 것과, 메모리에 올라와있는 프로세스의 물리 주소를 바꾸는 과정에서 내용을 옮기면서 많은 오버헤드를 불러온다. 

<br>

## 정보처리기사 필기 - 수식 표기법

### 중위 표기법 to 전/후위 표기법

`연산자 우선순위` 에 의해 대괄호 → 중괄호 → 소괄호 → 곱셈뺄셈 → 덧셈뺄셈 → 등호 순으로 계산한다. 계산함의 의미는 연산자를 (계산된) 데이터 사이에서 앞 /뒤로 이동시킨다는 의미다.

### 전/후위 표기법 to 중위 표기법

앞에서부터 탐색하면서 `연산자 + 데이터 + 데이터`  혹은 `데이터 + 데이터 + 연산자`  형태가 처음으로 보이면 즉시 `데이터 + 연산자 + 데이터`  형태로 변환한다. 그리고 다시 맨 앞에서 부터 탐색한다.