# 20231219_TIL - ì•Œê³ ë¦¬ì¦˜ í’€ì´


### B4179. ë¶ˆ! ğŸ¥‡V

[BOJ 4179: ë¶ˆ!](https://www.acmicpc.net/problem/4179)

- ì•„ì´ë””ì–´
    
    ```java
    ì§€í›ˆì´ì™€ ë¶ˆì€ ë™ì‹œì— ì›€ì§ì¸ë‹¤ 
    -> í•´ë‹¹ ì§€ì ê¹Œì§€ ë„ë‹¬ ì‹œê°„ì´ ê°™ìœ¼ë©´ íƒˆì¶œí•  ìˆ˜ ì—†ë‹¤
    
    queueë¥¼ ì´ìš©í•´ì„œ ë¶ˆì˜ ì´ë™ ë²”ìœ„ë¥¼ íƒìƒ‰í•˜ê²Œ í•˜ê³ , 
    ì´ë¯¸ ë¶ˆì´ ë°©ë¬¸í–ˆìœ¼ë©´ ë°©ë¬¸í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ì.
    
    ì¢…ë£Œì¡°ê±´ì€?
    -> queueì—ì„œ ì£¼ë³€ íƒìƒ‰ ì¤‘ì— out of range ì¡°ê±´ì— ê±¸ë¦¬ë©´ íƒˆì¶œ
    -> ë§Œì•½ ê·¸ëŸ¬ì§€ ì•Šê³  queueì—ì„œ ëª¨ë“ ê²Œ ë¹ ì ¸ë‚˜ì˜¤ë©´ ì‹¤íŒ¨ 
    ```
    
- ì½”ë“œ
    
    ```java
    package baekjoon;
    // ë¶ˆ!
    
    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.util.Arrays;
    import java.util.LinkedList;
    import java.util.Queue;
    import java.util.StringTokenizer;
    
    public class BOJ4179_ë¶ˆëŠë‚Œí‘œ {
    	// ë¯¸ë¡œì˜ ê°€ë¡œ, ì„¸ë¡œ ê¸¸ì´
    	static int m, n;
    
    	// ë¯¸ë¡œ ë°°ì—´
    	static char[][] map;
    
    	// bfsë¥¼ ìœ„í•œ ë°°ì—´
    	static int[] dr = {-1, 1, 0, 0};
    	static int[] dc = {0, 0, -1, 1};
    
    	// íƒˆì¶œì—¬ë¶€
    	static boolean hasEscaped = false;
    
    	// íƒˆì¶œ ì„±ê³µ ì‹œ ê¸°ë¡ ì‹œê°„
    	static int escapeTime;
    
    	public static void main(String[] args) throws IOException {
    		init();
    		// print("ì´ˆê¸°í™” í›„ ë°°ì—´ ì…ë ¥ ìƒí™©");
    		simulation();
    		answer();
    	}
    
    /*	private static void print(String content) {
    		System.out.println(content);
    		for (int r = 0; r < n; r++) {
    			for (int c = 0; c < m; c++) {
    				System.out.print(map[r][c] + " ");
    			}
    			System.out.println();
    		}
    	}*/
    
    	private static void init() throws IOException {
    		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    		StringTokenizer st = new StringTokenizer(br.readLine());
    
    		n = Integer.parseInt(st.nextToken());
    		m = Integer.parseInt(st.nextToken());
    
    		map = new char[n][m];
    
    		for (int r = 0; r < n; r++) {
    			String line = br.readLine();
    			for (int c = 0; c < m; c++) {
    				map[r][c] = line.charAt(c);
    			}
    		}
    	}
    
    	private static void simulation() {
    		// ì™„ì „íƒìƒ‰ í•˜ë©´ì„œ ë¶ˆê³¼ ì§€í›ˆì´ ìœ„ì¹˜ ì €ì¥í•˜ê¸°
    		int fr = -1;
    		int fc = -1;
    		int jr = -1;
    		int jc = -1;
    
    		for (int r = 0; r < n; r++) {
    			for (int c = 0; c < m; c++) {
    				if (map[r][c] == 'J') {
    					jr = r;
    					jc = c;
    				}
    
    				if (map[r][c] == 'F') {
    					fr = r;
    					fc = c;
    				}
    			}
    		}
    
    		// bfsë¥¼ ìœ„í•œ queue
    		Queue<int[]> queue = new LinkedList<>();
    
    		// ë°©ë¬¸ë°°ì—´ ìƒì„±, 3ì°¨ì›ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ 0: ë¶ˆ 1: ì§€í›ˆì´
    		int[][][] visited = new int[n][m][2];
    
    		// ì‹œì‘ ì§€ì ì„ 0ì´ˆë¡œ ë†“ê¸° ìœ„í•´ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì§€ì—­ì„ -1ë¡œ ì´ˆê¸°í™”
    		for (int r = 0; r < n; r++) {
    			for (int c = 0; c < m; c++) {
    				Arrays.fill(visited[r][c], -1);
    			}
    		}
    
    		// ì§€í›ˆì´ ë‹¤ìŒ ë¶ˆ ìœ„ì¹˜ ì…ë ¥
    		queue.offer(new int[] {jr, jc, 1});
    		if (fr != -1) {
    			queue.offer(new int[] {fr, fc, 0});
    		}
    
    		// ì‹œì‘ì§€ì  ë°©ë¬¸ì²´í¬
    		visited[jr][jc][1] = 0;
    		if (fr != -1) {
    			visited[fr][fc][0] = 0;
    		}
    
    		// ë” ë°©ë¬¸í•  ì§€ì ì´ ì—†ì„ ë•Œê¹Œì§€
    		while (!queue.isEmpty()) {
    
    			// ë‹¤ìŒ ë°©ë¬¸ì¢Œí‘œ
    			int[] cur = queue.poll();
    			int cr = cur[0];
    			int cc = cur[1];
    			int curStatus = cur[2];
    
    			// ì£¼ë³€íƒìƒ‰
    			for (int dt = 0; dt < 4; dt++) {
    				int nr = cr + dr[dt];
    				int nc = cc + dc[dt];
    
    				// out of indexì¸ë° ì§€í›ˆì´ë©´ í†µê³¼
    				if (nr < 0 || nc < 0 || nr >= n || nc >= m) {
    					if (curStatus == 1) {
    						escapeTime = visited[cr][cc][curStatus] + 1;
    						hasEscaped = true;
    						return;
    					} else {
    						continue;
    					}
    				}
    
    				// ë²½ì´ë©´ ìŠ¤í‚µ
    				if (map[nr][nc] == '#') {
    					continue;
    				}
    
    				// ë°©ë¬¸í•œ ì§€ì ì´ë©´ ìŠ¤í‚µ
    				if (visited[nr][nc][curStatus] >= 0) {
    					continue;
    				}
    
    				// ë°©ë¬¸ ì•ˆí•œ ê²½ìš° 1) ë¶ˆì¼ ë•ŒëŠ” ê·¸ëƒ¥ ë°©ë¬¸
    				if (curStatus == 0) {
    					queue.offer(new int[] {nr, nc, curStatus});
    					visited[nr][nc][curStatus] = visited[cr][cc][curStatus] + 1;
    				}
    				// ë°©ë¬¸ ì•ˆí•œ ê²½ìš° 2) ì§€í›ˆì´ë©´ ë¶ˆì´ ì´ë¯¸ ë°©ë¬¸ ì•ˆí–ˆì„ ë•Œë§Œ ë°©ë¬¸
    				else {
    					if (visited[nr][nc][0] == -1
    						|| (visited[nr][nc][0] >= 0 && visited[nr][nc][curStatus] < visited[nr][nc][0])) {
    						queue.offer(new int[] {nr, nc, curStatus});
    						visited[nr][nc][curStatus] = visited[cr][cc][curStatus] + 1;
    					}
    				}
    			}
    		}
    	}
    
    	private static void answer() {
    		// ê²°ê³¼ ì¶œë ¥
    		System.out.println((hasEscaped) ? escapeTime : "IMPOSSIBLE");
    	}
    }
    ```
    
- ëŠë‚€ ì 
    - ë‹¤ì‹œ í’€ì–´ë„ ì—¬ëŸ¬ ë²ˆ íŠ¸ë¼ì´ í•´ì•¼ í–ˆë‹¤. ì¢€ ë” ì¡°ê±´ì„ ê¹Šê²Œ ìƒê°í•´ë´ì•¼ í•˜ëŠ”ë°.. ê¾¸ì¤€íˆ í’€ë‹¤ë³´ë©´ì„œ ê°ì´ ë‹¤ì‹œ ì˜¬ë¼ì˜¤ê¸¸ ë°”ë€ë‹¤.