# 20231224_TIL - Recap

---

## Recap

### JVM 클래스 로더

JVM이 명령어 단위로 코드 실행 시 필요한 클래스가 있다면 클래스 로딩을 요청한다.

클래스 로딩을 요청받으면 우선 처음엔 최상위 클래스 로더(부트스트랩)가 하위 클래스 로더를 로딩한다.

그 후 상위 클래스 로더에서부터 각각의 디렉토리 내에서 찾으려는 명령어를 실행하기 위한 클래스가 있는지 탐색한다. 

- 부트스트랩 클래스 로더는 `jre/lib` 디렉토리
- 확장 클래스 로더는 `jre/lib/ext` 디렉토리 OR `java.ext.dirs` 내 `.JAR` 파일
- 어플리케이션 클래스 로더는 사용자 생성클래스와 사용자 지정 경로 내 `.JAR` 파일
- 여기까지 보고 나서 마지막으로 파일 시스템을 확인해보고 클래스를 찾지 못하면 `ClassNotFoundException` 던짐

### JVM Runtime Data Area 구조

- method: 클래스와 클래스 내 메소드들의 정보를 가지고 있다.
- stack: method에서 관리하는 메소드 실행 시 들어가는 매개변수와 반환값, 지역변수 정보를 가지고 있다. 메소드 실행이 끝나면 비워진다.
- heap: 메소드 실행시 생성되는 참조형 변수(배열 등), 클래스의 인스턴스를 관리하는 공간이다. gc가 관리한다.
- PC Register: JVM 명령의 주소값이 저장되는 공간.
- Native Method Stack: 비 Java 언어로 작성된 메소드를 실행시킬 때 사용하는 영역.